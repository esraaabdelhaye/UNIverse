<div class="container">
  <aside class="sidebar">
    <div class="sidebar-header">
      <span class="material-symbols-outlined logo-icon">school</span>
      <h2 class="logo-text">UNIverse</h2>
    </div>
    <nav class="sidebar-nav">
      <a class="nav-item" routerLink="/student-dashboard" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
        <span class="material-symbols-outlined">dashboard</span>
        <span>Dashboard</span>
      </a>
      <a class="nav-item" routerLink="/student-dashboard/my-courses" routerLinkActive="active">
        <span class="material-symbols-outlined">book</span>
        <span>My Courses</span>
      </a>
      <a class="nav-item active" routerLink="/student-dashboard/submit-assignments" routerLinkActive="active">
        <span class="material-symbols-outlined">assignment_turned_in</span>
        <span>Submit Assignments</span>
      </a>
      <a class="nav-item" routerLink="/student-dashboard/view-grades" routerLinkActive="active">
        <span class="material-symbols-outlined">grade</span>
        <span>View Grades</span>
      </a>
      <a class="nav-item" routerLink="/student-dashboard/view-materials" routerLinkActive="active">
        <span class="material-symbols-outlined">folder</span>
        <span>View Materials</span>
      </a>
    </nav>
    <div class="sidebar-footer">
      <a class="nav-item" href="javascript:void(0)" (click)="logout()">
        <span class="material-symbols-outlined">logout</span>
        <span>Logout</span>
      </a>
    </div>
  </aside>

  <div class="main-wrapper">
    <header class="header">
      <div class="header-content">
        <button class="notification-btn">
          <span class="material-symbols-outlined">notifications</span>
          <span class="notification-badge"></span>
        </button>
        <div class="user-avatar"></div>
        <div class="user-info">
          <p class="user-name">Alex Johnson</p>
          <p class="user-role">Student</p>
        </div>
      </div>
    </header>

    <main class="main-content">
      <div class="content-container">
        <div class="page-header">
          <h1>Submit Assignments</h1>
          <p class="page-subtitle">Stay on top of your deadlines and submit your work here.</p>
        </div>

        <div class="card">
          <div class="card-header">
            <h2>Your Assignments</h2>
            <div class="filters">
              <div class="select-wrapper">
                <select class="filter-select" [(ngModel)]="selectedCourse" (change)="onCourseChange()">
                  <option value="">All Courses</option>
                  <option value="CS101">CS101: Intro to Programming</option>
                  <option value="CS202">CS202: Data Structures</option>
                  <option value="DS310">DS310: Web Development</option>
                </select>
                <span class="material-symbols-outlined select-icon">expand_more</span>
              </div>
              <div class="select-wrapper">
                <select class="filter-select" [(ngModel)]="selectedSort" (change)="onSortChange()">
                  <option value="duedate">Sort by Due Date</option>
                  <option value="course">Sort by Course</option>
                </select>
                <span class="material-symbols-outlined select-icon">expand_more</span>
              </div>
            </div>
          </div>

          <div class="table-wrapper">
            <table class="assignments-table">
              <thead>
              <tr>
                <th>Assignment Title</th>
                <th>Course</th>
                <th>Due Date</th>
                <th>Status</th>
                <th class="text-right">Action</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let assignment of filteredAssignments">
                <td class="assignment-title">{{ assignment.title }}</td>
                <td class="course-code">{{ assignment.course }}</td>
                <td class="due-date" [ngClass]="assignment.status === 'pending' && assignment.dueDate.includes('Today') ? 'urgent' : assignment.status === 'pending' ? 'warning' : ''">
                  {{ assignment.dueDate }}
                </td>
                <td>
                    <span class="status-badge" [ngClass]="'status-' + assignment.status">
                      <span *ngIf="assignment.status === 'graded'">Graded ({{ assignment.grade }}%)</span>
                      <span *ngIf="assignment.status === 'pending'">Pending</span>
                      <span *ngIf="assignment.status === 'submitted'">Submitted</span>
                      <span *ngIf="assignment.status === 'pastdue'">Past Due</span>
                    </span>
                </td>
                <td class="text-right">
                  <button *ngIf="assignment.status === 'pending'" class="btn btn-primary" (click)="submitAssignment(assignment)">
                    <span class="material-symbols-outlined">upload</span>
                    Submit
                  </button>
                  <button *ngIf="assignment.status === 'submitted'" class="btn btn-secondary" (click)="viewSubmission(assignment)">
                    <span class="material-symbols-outlined">visibility</span>
                    View
                  </button>
                  <button *ngIf="assignment.status === 'graded'" class="btn btn-secondary" (click)="viewGrade(assignment)">
                    <span class="material-symbols-outlined">grade</span>
                    Grade
                  </button>
                  <button *ngIf="assignment.status === 'pastdue'" class="btn btn-disabled" disabled>
                    <span class="material-symbols-outlined">lock</span>
                    Closed
                  </button>
                </td>
              </tr>
              </tbody>
            </table>
          </div>

          <div *ngIf="filteredAssignments.length === 0" style="text-align: center; padding: 32px; color: #64748B;">
            <p>No assignments found</p>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
