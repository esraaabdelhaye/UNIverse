<div class="container">
  <aside class="sidebar">
    <div class="sidebar-header">
      <span class="material-symbols-outlined logo-icon">school</span>
      <h2 class="logo-text">UNIverse</h2>
    </div>
    <nav class="nav">
      <a
        class="nav-link active"
        routerLink="/doctor-dashboard"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
      >
        <span class="material-symbols-outlined">dashboard</span>
        <span>Dashboard</span>
      </a>
      <a class="nav-link" routerLink="/doctor-dashboard/upload-material" routerLinkActive="active">
        <span class="material-symbols-outlined">upload_file</span>
        <span>Upload Material</span>
      </a>
      <a class="nav-link" routerLink="/doctor-dashboard/course-students" routerLinkActive="active">
        <span class="material-symbols-outlined">book</span>
        <span>Course Details</span>
      </a>
      <a class="nav-link" routerLink="/doctor-dashboard/add-assignment" routerLinkActive="active">
        <span class="material-symbols-outlined">grade</span>
        <span>Add Assignment</span>
      </a>
      <a class="nav-link" routerLink="/doctor-dashboard/grade-students" routerLinkActive="active">
        <span class="material-symbols-outlined">grading</span>
        <span>Grade Students</span>
      </a>
      <a class="nav-link" routerLink="/doctor-dashboard/view-submissions" routerLinkActive="active">
        <span class="material-symbols-outlined">assignment</span>
        <span>View Submissions</span>
      </a>
      <a class="nav-link" routerLink="/doctor-dashboard/course-announcements" routerLinkActive="active">
        <span class="material-symbols-outlined">campaign</span>
        <span>Announcements</span>
      </a>
    </nav>
    <div class="sidebar-footer">
      <a class="nav-link logout-link" (click)="logout()" href="javascript:void(0)">
        <span class="material-symbols-outlined">logout</span>
        <span>Log Out</span>
      </a>
    </div>
  </aside>

  <div class="main-wrapper">
    <header class="header">
      <div class="header-actions">
        <button class="icon-button">
          <span class="material-symbols-outlined">notifications</span>
          <span class="notification-badge"></span>
        </button>
        <img class="user-avatar" src="../../../../assets/user.png" alt="User" />
        <div class="user-info">
          <p class="user-name">{{ currentDoctor.fullName }}</p>
          <p class="user-role">{{ currentDoctor.role }}</p>
        </div>
      </div>
    </header>

    <main class="main-content">
      <div class="content-wrapper">
        <div class="page-header">
          <h1 class="page-title">Grade Students</h1>
          <p class="page-subtitle">Review and grade student submissions</p>
        </div>

        <div class="card">
          <div class="filters">
            <div class="form-group">
              <label class="form-label">Select Course</label>
              <select class="form-select" [(ngModel)]="selectedCourse" (change)="onCourseChange()">
                <option value="">All Courses</option>
                <option *ngFor="let course of courses" [value]="course.courseId">
                  {{ course.courseTitle }}
                </option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">Status</label>
              <select class="form-select" [(ngModel)]="selectedStatus" (change)="onStatusChange()">
                <option value="all">All</option>
                <option value="pending">Needs Grading</option>
                <option value="graded">Graded</option>
                <option value="late">Late</option>
              </select>
            </div>
          </div>

          <div class="table-wrapper">
            <table class="grades-table">
              <thead>
                <tr>
                  <th>Student</th>
                  <th>Assignment</th>
                  <th>Submitted</th>
                  <th>Status</th>
                  <th>Score</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let student of filteredStudents">
                  <td class="student-cell">
                    <!-- <img [src]="student.avatar" class="student-avatar" alt="" />
                    <span class="student-name">{{ student.name }}</span>
                  </td>
                  <td>{{ student.assignment }}</td>
                  <td>{{ student.submittedDate }}</td> -->
                  </td>

                  <td>
                    <span class="badge" [ngClass]="'badge-' + student.status">
                      {{
                        status === 'pending'
                          ? 'Needs Grading'
                          : status === 'late'
                          ? 'Late'
                          : ('Graded' | titlecase)
                      }}
                      {{ student.status | titlecase }}
                    </span>
                  </td>
                  <!-- <td>{{ student.score ? student.score + '%' : '-' }}</td> -->
                  <td>
                    <button
                      class="btn-action btn-grade"
                      (click)="gradeStudent(student)"
                      [disabled]="student.status === 'graded'"
                    >
                      {{ student.status === 'graded' ? 'Graded' : 'Grade' }}
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="table-empty" *ngIf="filteredStudents.length === 0">
            <p>No submissions found</p>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
