<div class="container">
  <aside class="sidebar">
    <div class="sidebar-header">
      <span class="material-symbols-outlined logo-icon">school</span>
      <h2 class="logo-text">UNIverse</h2>
    </div>
    <nav class="nav">
      <a
        class="nav-link"
        routerLink="/doctor-dashboard"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
      >
        <span class="material-symbols-outlined">dashboard</span>
        <span>Dashboard</span>
      </a>
      <a class="nav-link" routerLink="/doctor-dashboard/upload-material" routerLinkActive="active">
        <span class="material-symbols-outlined">upload_file</span>
        <span>Upload Material</span>
      </a>
      <a class="nav-link" routerLink="/doctor-dashboard/grade-students" routerLinkActive="active">
        <span class="material-symbols-outlined">grade</span>
        <span>Grade Students</span>
      </a>
      <a
        class="nav-link active"
        routerLink="/doctor-dashboard/view-submissions"
        routerLinkActive="active"
      >
        <span class="material-symbols-outlined">assignment</span>
        <span>View Submissions</span>
      </a>
      <a class="nav-link" routerLink="/doctor-dashboard/announcements" routerLinkActive="active">
        <span class="material-symbols-outlined">campaign</span>
        <span>Announcements</span>
      </a>
    </nav>
    <div class="sidebar-footer">
      <a class="nav-link logout-link" (click)="logout()" href="javascript:void(0)">
        <span class="material-symbols-outlined">logout</span>
        <span>Log Out</span>
      </a>
    </div>
  </aside>

  <div class="main-wrapper">
    <header class="header">
      <div class="header-actions">
        <button class="icon-button">
          <span class="material-symbols-outlined">notifications</span>
          <span class="notification-badge"></span>
        </button>
        <img class="user-avatar" src="https://i.pravatar.cc/40" alt="User" />
        <div class="user-info">
          <p class="user-name">John Doe</p>
          <p class="user-role">Professor</p>
        </div>
      </div>
    </header>

    <main class="main-content">
      <div class="content-wrapper">
        <div class="page-header">
          <h1 class="page-title">View Submissions</h1>
          <p class="page-subtitle">View student work and provide feedback</p>
        </div>

        <div class="card">
          <div class="filter-section">
            <div class="form-group">
              <label class="form-label">Select Assignment</label>
              <select
                class="form-select"
                [(ngModel)]="selectedAssignment"
                (change)="onAssignmentChange()"
              >
                <option value="">All Assignments</option>
                <option *ngFor="let assignment of assignments" [ngValue]="assignment.id">
                  {{ assignment.courseCode }}: {{ assignment.assignmentTitle }}
                </option>
              </select>
            </div>
          </div>

          <div class="table-wrapper">
            <table class="submissions-table">
              <thead>
                <tr>
                  <th>Student</th>
                  <th>Submitted Date</th>
                  <th>Assignment</th>
                  <th>Status</th>
                  <th>Action</th>
                  <th>Grade</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let submission of filteredSubmissions">
                  <td class="student-cell">
                    <!-- <img [src]="submission.studentAvatar" class="student-avatar" alt="" /> -->
                    <span>{{ submission.studentName }}</span>
                  </td>
                  <td>{{ submission.submissionDate }}</td>
                  <td>{{ submission.assignmentTitle }}</td>
                  <td>
                    <span class="badge" [ngClass]="'badge-' + submission.status">
                      {{ submission.status }}
                    </span>
                  </td>
                  <td class="action-cell">
                    <button class="btn-view" (click)="viewSubmission(submission)">View</button>
                    <button class="btn-action btn-grade" (click)="gradeSubmission(submission)">
                      {{ submission.status === 'graded' ? 'Edit Grade' : 'Grade' }}
                    </button>
                  </td>
                  <td>
                    <span *ngIf="submission.status === 'graded'" class="grade graded">
                      {{ submission.grade }}
                    </span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="table-empty" *ngIf="filteredSubmissions.length === 0">
            <p>No submissions found</p>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
