<div class="app-container">
  <!-- Navbar (always visible) -->
  <app-navbar
    [userName]="userName"
    [userRole]="userRole"
    (toggleSidebar)="toggleSidebar()"
    (logout)="logout()">
  </app-navbar>

  <!-- Main Layout -->
  <div class="main-layout">
    <!-- Sidebar (collapsible) -->
    <app-sidebar
      [isOpen]="sidebarOpen"
      [currentPage]="currentPage"
      [userRole]="userRole"
      (navigate)="navigateTo($event)">
    </app-sidebar>

    <!-- Main Content Area -->
    <main class="main-content" [class.sidebar-closed]="!sidebarOpen">
      <!-- Loading Spinner -->
      <div class="page-loader" *ngIf="isLoading">
        <div class="spinner"></div>
      </div>

      <!-- Page Container -->
      <div class="page-container" [class.hidden]="isLoading">
        <!-- STUDENT PAGES -->
        <ng-container *ngIf="userRole === 'student'">
          <app-student-dashboard *ngIf="currentPage === 'dashboard'"></app-student-dashboard>
          <app-student-courses *ngIf="currentPage === 'courses'"></app-student-courses>
          <app-student-assignments *ngIf="currentPage === 'assignments'"></app-student-assignments>
          <app-student-submit *ngIf="currentPage === 'submit'"></app-student-submit>
          <app-student-materials *ngIf="currentPage === 'materials'"></app-student-materials>
        </ng-container>

        <!-- PROFESSOR PAGES -->
        <ng-container *ngIf="userRole === 'professor'">
          <app-professor-dashboard *ngIf="currentPage === 'dashboard'"></app-professor-dashboard>
          <app-professor-courses *ngIf="currentPage === 'courses'"></app-professor-courses>
          <app-professor-grade *ngIf="currentPage === 'grade'"></app-professor-grade>
          <app-professor-materials *ngIf="currentPage === 'materials'"></app-professor-materials>
          <app-professor-assignment *ngIf="currentPage === 'assignment'"></app-professor-assignment>
        </ng-container>

        <!-- ADMIN PAGES -->
        <ng-container *ngIf="userRole === 'admin'">
          <app-admin-dashboard *ngIf="currentPage === 'dashboard'"></app-admin-dashboard>
          <app-admin-courses *ngIf="currentPage === 'courses'"></app-admin-courses>
          <app-admin-faculty *ngIf="currentPage === 'faculty'"></app-admin-faculty>
          <app-admin-timetable *ngIf="currentPage === 'timetable'"></app-admin-timetable>
        </ng-container>

        <!-- TA PAGES -->
        <ng-container *ngIf="userRole === 'ta'">
          <app-ta-dashboard *ngIf="currentPage === 'dashboard'"></app-ta-dashboard>
          <app-ta-queries *ngIf="currentPage === 'queries'"></app-ta-queries>
          <app-ta-add-grades *ngIf="currentPage === 'addgrades'"></app-ta-add-grades>
          <app-ta-submissions *ngIf="currentPage === 'submissions'"></app-ta-submissions>
        </ng-container>
      </div>
    </main>
  </div>

  <!-- Footer (optional) -->
  <footer class="app-footer">
    <p>&copy; 2024 UNiverse Management System. All rights reserved.</p>
  </footer>

  <!-- Development: Role Switcher (remove in production) -->
  <div class="dev-role-switcher" *ngIf="true">
    <small>Dev - Switch Role:</small>
    <button (click)="switchRole('student')" [class.active]="userRole === 'student'" class="role-btn">
      Student
    </button>
    <button (click)="switchRole('professor')" [class.active]="userRole === 'professor'" class="role-btn">
      Professor
    </button>
    <button (click)="switchRole('admin')" [class.active]="userRole === 'admin'" class="role-btn">
      Admin
    </button>
    <button (click)="switchRole('ta')" [class.active]="userRole === 'ta'" class="role-btn">
      TA
    </button>
  </div>
</div>
