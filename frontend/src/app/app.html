<div class="app-container">
  <!-- Navbar (always visible) -->
  <app-navbar
    [userName]="userName"
    [userRole]="userRole"
    (toggleSidebar)="toggleSidebar()"
    (logout)="logout()">
  </app-navbar>

  <!-- Main Layout -->
  <div class="main-layout">
    <!-- Sidebar (collapsible) -->
    <app-sidebar
      [isOpen]="sidebarOpen"
      [currentPage]="''"
      [userRole]="userRole"
      (navigate)="navigateTo($event)">
    </app-sidebar>

    <!-- Main Content Area -->
    <main class="main-content" [class.sidebar-closed]="!sidebarOpen">
      <!-- Loading Spinner -->
      <div class="page-loader" *ngIf="isLoading">
        <div class="spinner"></div>
      </div>

      <!-- Router Outlet - All pages render here -->
      <router-outlet></router-outlet>
    </main>
  </div>

  <!-- Footer (optional) -->
  <footer class="app-footer">
    <p>&copy; 2024 UNIverse Management System. All rights reserved.</p>
  </footer>

  <!-- Development: Role Switcher (remove in production) -->
  <div class="dev-role-switcher" *ngIf="true">
    <small>Dev - Switch Role:</small>
    <button (click)="switchRole('student')" [class.active]="userRole === 'student'" class="role-btn">
      Student
    </button>
    <button (click)="switchRole('professor')" [class.active]="userRole === 'professor'" class="role-btn">
      Professor
    </button>
    <button (click)="switchRole('admin')" [class.active]="userRole === 'admin'" class="role-btn">
      Admin
    </button>
    <button (click)="switchRole('ta')" [class.active]="userRole === 'ta'" class="role-btn">
      TA
    </button>
  </div>
</div>
